<VirtualHost *:80>

    ServerName SERVERNAME
    ServerAlias SERVERALIAS

    <IfModule mod_rewrite.c>
        RewriteEngine On
        RewriteCond %{HTTPS} off [OR]
        RewriteCond %{HTTP_HOST} ^www\. [NC]
        RewriteCond %{HTTP_HOST} ^(?:www\.)?(.+)$ [NC]
        RewriteRule ^ https://%1%{REQUEST_URI} [L,NE,R=301]
    </IfModule>

</VirtualHost>

<VirtualHost *:443>

    ServerName SERVERNAME
    ServerAlias SERVERALIAS

    <IfModule mod_rewrite.c>
        RewriteEngine On
        RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
        RewriteRule ^(.*)$ https://%1/$1 [R=301,L]
    </IfModule>

    LogLevel warn
    CustomLog /var/www/html/CasinoApp/logs/access.log combined
    ErrorLog /var/www/html/CasinoApp/logs/error.log

    <Directory /var/www/html/CasinoApp>
        WSGIProcessGroup casinoapp
        WSGIApplicationGroup %{GLOBAL}
        Order deny,allow
        Allow from all
    </Directory>

    Alias /static /var/www/html/CasinoApp/static
    <Directory /var/www/html/CasinoApp/static>
        Order allow,deny
        Allow from all
    </Directory>

    <Directory /var/www/html/CasinoApp/static/upload/profileimg/>
        Order allow,deny
        Allow from all
    </Directory>

</VirtualHost>